<!DOCTYPE html>
<html>
<head>
  <title>Ethereum/AUD Exchange</title>
  <link href="./app/stylesheets/app.css" rel="stylesheet" type="text/css">
  <!<script src="/socket.io/socket.io.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
  <!<script src="./chat.js"></script>
  <script src="./app.js"></script>
</head>
<body>
  <h1 align="centre">ETH/AUD Market</h1>
  <div id="container" style="position:relative">

  <!--------BUY BUY BUY BUY BUY BUY---------!>
  <!VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV!>

    <div id="buy">
      <table>
        <h2>Buy Orders</h2>
        <tr><th>Price(AUD)</th>
        <th>Volume(ETH)</th>
        <th>Value(AUD)</th></tr>
        <tbody id="buy_orders"></tbody>
      </table><br><br>

      <div id="new_buy_contract">
        Value (AUD):<input type="number" id="bid_value" required><br>
        Price (AUD):<input type="number" id="bid_price" required><br>
        <button onclick="App.setup_buy()" href="#">add buy order contract</button>
      </div>
      <div id="selBuyAddr" class="hidden">
        Contract Address:<input size="42" type="text" id="selected_buy_address" readonly>
      </div>
      <br>
      <div id="sell_ether" class="hidden" bgcolor="lightyellow">
        Select Value(AUD):<select  id="sell_val"><option value="50">$50</option><option value="100">$100</option><option value="200">$200</option><option value="500">$500</option><option value="1000">$1000</option></select>
	<button onclick="App.sell()" href="#">Sell Ether to this Contract</button><br>
        <button onclick="App.buy_order_payment_received()" href="#">Payment Received</button>
      </div>
      <! CHANGE PRICE/VOLUME  !>
      <div id="buy_contract_functions" class="hidden">        
          New Price:<input type="number" id="new_buy_price">
          <button  onclick="App.change_price()" href="#">Change Price</button><br>        
          Remove Ether:<input type="number" id="remove_ether">
          <button  onclick="App.remove_ether()" href="#">Remove ether from contract</button><br>       
      </div>  
      <button id="terminate_buy_contract" class="hidden"  onclick="App.terminate_contract()" href="#">terminate contract</button>  
      <table>
      <tbody id="buy_pending_txs"></tbody>
      </table>
    </div>
    
    
    <!--------SELL SELL SELL SELL SELL-------------!>
    <!vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv!>

    <div id="sell">
      <table>
        <h2>Sell Orders</h2> 
        <tr><th>Price(AUD)</th>
        <th>Volume(ETH)</th>
        <th>Value(AUD)</th></tr>
        <tbody id="sell_orders"></tbody>
      </table><br><br>

      <div id="new_sell_contract">
        Value (AUD):<input type="number" id="ask_value"><br>
        Price (AUD):<input type="number" id="ask_price">
        <br><button onclick="App.setup_sell()" href="#">add sell order contract</button>
      </div>
      <div id="selSellAddr" class="hidden">
        Contract Address:<input type="text" id="selected_sell_address" readonly><br>
      </div>
      <div id="buy_ether" class="hidden" bgcolor="lightyellow">
        Select Value(AUD):<select  id="buy_val"><option value="50">$50</option><option value="100">$100</option><option value="200">$200</option><option value="500">$500</option><option value="1000">$1000</option></select>
        <button onclick="App.buy()" href="#">Buy Ether from this Contract</button>
      </div>      
      <div id="sell_contract_functions" class="hidden">
          New Price:<input type="number" id="new_sell_price">
          <button  onclick="App.change_price()" href="#">Change Price</button><br>         
          Add Ether:<input type="number" id="add_ether">
           <button  onclick="App.add_ether()" href="#">Add Ether to contract</button><br>
      </div>  
      <button id="terminate_sell_contract" class="hidden" onclick="App.terminate_contract()" href="#">terminate contract</button><br>
      <table>
      <tbody id="sell_pending_txs"></tbody>
      </table>
    </div>
  </div>
  <div style="float:left;width:100px;border-right:1px solid black;height:300px;padding:10px;overflow:scroll-y;">
    <b>USERS</b>
    <div id="users"></div>
    </div>
    <div style="float:left;width:300px;height:250px;overflow:scroll-y;padding:10px;">
    <div id="conversation"></div>
    <input id="data" style="width:200px;" />
    <input type="button" id="datasend" value="send" />
  </div>

</body>
</html>
<script>/*
  var socket = io.connect('http://localhost:8081');

  // on connection to server, ask for user's name with an anonymous callback
  socket.on('connect', function(){
    // call the server-side function 'adduser' and send one parameter (value of prompt)
    socket.emit('adduser', web3.eth.accounts[0]);
  });

  // listener, whenever the server emits 'updatechat', this updates the chat body
  socket.on('updatechat', function (username, data) {
    $('#conversation').append('<b>'+username + ':</b> ' + data + '<br>');
  });

  // listener, whenever the server emits 'updateusers', this updates the username list
  socket.on('updateusers', function(data) {
    $('#users').empty();
    $.each(data, function(key, value) {
      $('#users').append('<div>' + key + '</div>');
    });
  });

  // on load of page
  $(function(){
    // when the client clicks SEND
    $('#datasend').click( function() {
      var message = $('#data').val();
      $('#data').val('');
      // tell server to execute 'sendchat' and send along one parameter
      socket.emit('sendchat', message);
    });

    // when the client hits ENTER on their keyboard
    $('#data').keypress(function(e) {
      if(e.which == 13) {
        $(this).blur();
        $('#datasend').focus().click();
      }
    });
  });

*/</script>
